ref: git_clone
version: 1.2.0
resultFile: /usr/resultFile
inputParameters:
  - name: 用户名
    ref: username
    type: SECRET
    value: ""
    description: git平台的账号
    required: false
  - name: 密码
    ref: password
    type: SECRET
    value: ""
    description: git平台的密码
    required: false
  - name: ssh私钥
    ref: ssh_key
    type: SECRET
    value: ""
    description: 平台中设置的ssh公钥对应的私钥(id_rsa)
    required: false
  - name: git地址
    ref: remote_url
    type: STRING
    description: 配置远程的git源,即从哪个url上clone项目,使用账号密码的方式的url"https://gitee.com/jianmu_dev/jianmu-ci-ui.git"或者使用ssh的方式的url"git@gitee.com:jianmu_dev/jianmu-ci-ui.git"
    required: true
  - name: 标签或分支
    ref: ref
    type: STRING
    value: refs/heads/master
    description: 需要git的标签，分支或pr标签,如果是branch则格式为："/refs/heads/master"； 如果是tag则格式为："/refs/tags/1.0.0"； 若选择pr标签模式请参考各个平台的标准,参考：gitee为pull/1/head:pr_1，github为pull/1/head:pr1，gitlab为refs/merge-requests/1/head，coding为refs/merge/1/HEAD
    required: false
  - name: 提交id
    ref: commit_id
    type: STRING
    value: ""
    description: 在ref为分支或pr的模式下，可以指定commit id，更精确的clone项目
    required: false
outputParameters:
  - ref: git_path
    name: git clone目录
    type: STRING
    description: 会将clone完成后的项目存放的地址以绝对路径的方式返回
    required: true
  - ref: git_branch
    name: git分支
    type: STRING
    value: ""
    description: 如果选择git分支,则会将此分支名返回,如：master,git_tag参数和git_branch参数只会返回一个
    required: false
  - ref: git_tag
    name: git tags
    type: STRING
    value: ""
    description: 如果选择某个标签,则会将此标签返回,如：1.0.0,git_tag参数和git_branch参数只会返回一个
    required: false
  - ref: commit_id
    name: commit id
    type: STRING
    description: 将当前版本的commit id返回
    required: true
spec:
  image: 'jianmudev/jianmu-runner-git:1.2.0'
  cmd: ['/usr/local/bin/clone.sh']